<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GEPT 英檢中級閃卡</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        .perspective-1000 { perspective: 1000px; }
        .transform-style-3d { transform-style: preserve-3d; }
        .backface-hidden { backface-visibility: hidden; }
        .rotate-y-180 { transform: rotateY(180deg); }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        
        // 這裡定義圖示組件，對接 Lucide CDN
        const Icon = ({ name, size = 24, className = "" }) => {
            const [iconHtml, setIconHtml] = useState("");
            useEffect(() => {
                if (window.lucide) {
                    const svg = lucide.createIcons({
                        icons: { [name]: true },
                        attrs: { strokeWidth: 2, width: size, height: size, class: className }
                    });
                }
            }, [name, size, className]);
            return <i data-lucide={name} className={className}></i>;
        };

        const wordData = {
          "Day 1": [
            { word: "Abandon", ipa: "[əˈbændən]", pos: "v.", trans: "拋棄、放棄", detail: "重音在第二音節 ban。", example: "He had to abandon the car after it broke down.", exampleTrans: "汽車拋錨後，他不得不棄車而去。" },
            { word: "Accomplish", ipa: "[əˈkʌmplɪʃ]", pos: "v.", trans: "完成、實現", detail: "sh 發音要輕快。", example: "We can accomplish anything if we work together.", exampleTrans: "如果我們齊心協力，任何事都能完成。" },
            { word: "Accountable", ipa: "[əˈkaʊntəbl]", pos: "adj.", trans: "應負責任的", detail: "重音在 coun，able 發音較輕。", example: "Politicians should be accountable to the public.", exampleTrans: "政治人物應對公眾負責。" },
            { word: "Accustom", ipa: "[əˈkʌstəm]", pos: "v.", trans: "使習慣於", detail: "cus 發短音 [ʌ]。", example: "It took me a while to accustom myself to the new climate.", exampleTrans: "我花了一段時間才讓自己適應新氣候。" },
            { word: "Acquisition", ipa: "[ˌækwɪˈzɪʃn]", pos: "n.", trans: "獲得、獲得物", detail: "重音在 zi，ac 發 [æ]。", example: "The library's latest acquisition is a rare book.", exampleTrans: "圖書館最新獲得的藏品是一本罕見的書。" }
          ],
          "Day 2": [
            { word: "Beneficial", ipa: "[ˌbenɪˈfɪʃl]", pos: "adj.", trans: "有益的", detail: "重音在 fi。", example: "A balanced diet is beneficial to your health.", exampleTrans: "均衡飲食對你的健康有益。" },
            { word: "Capacity", ipa: "[kəˈpæsəti]", pos: "n.", trans: "容量、能力", detail: "重音在 pa。", example: "The stadium has a seating capacity of 50,000.", exampleTrans: "這座體育場有五萬個座位。" },
            { word: "Confront", ipa: "[kənˈfrʌnt]", pos: "v.", trans: "面對、對抗", detail: "front 發音類似 fr-unt。", example: "We must confront the challenges head-on.", exampleTrans: "我們必須正面迎接挑戰。" },
            { word: "Distinguish", ipa: "[dɪˈstɪŋɡwɪʃ]", pos: "v.", trans: "區分、辨別", detail: "gui 發 [ɡwɪ] 的音。", example: "It's hard to distinguish between the two colors.", exampleTrans: "很難區分這兩種顏色。" },
            { word: "Equivalent", ipa: "[ɪˈkwɪvələnt]", pos: "adj./n.", trans: "相等的、等價物", detail: "重音在 qui [kwɪ]。", example: "Eight kilometers is roughly equivalent to five miles.", exampleTrans: "8公里大約等於5英里。" }
          ]
        };

        const App = () => {
          const [currentDay, setCurrentDay] = useState("Day 1");
          const [currentIndex, setCurrentIndex] = useState(0);
          const [isFlipped, setIsFlipped] = useState(false);
          const [isCompleted, setIsCompleted] = useState(false);

          useEffect(() => {
            if (window.lucide) lucide.createIcons();
          }, [currentIndex, isFlipped, isCompleted, currentDay]);

          const currentWords = wordData[currentDay];
          const currentWord = currentWords[currentIndex];

          const handleSpeak = (text) => {
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'en-US';
            utterance.rate = 0.9;
            window.speechSynthesis.speak(utterance);
          };

          const nextCard = () => {
            if (currentIndex < currentWords.length - 1) {
              setCurrentIndex(prev => prev + 1);
              setIsFlipped(false);
            } else {
              setIsCompleted(true);
            }
          };

          const prevCard = () => {
            if (currentIndex > 0) {
              setCurrentIndex(prev => prev - 1);
              setIsFlipped(false);
              setIsCompleted(false);
            }
          };

          const resetDay = () => {
            setCurrentIndex(0);
            setIsFlipped(false);
            setIsCompleted(false);
          };

          return (
            <div className="min-h-screen bg-slate-50 p-4 md:p-8 flex flex-col items-center font-sans text-slate-800">
              <div className="max-w-md w-full">
                <header className="mb-8 text-center">
                  <h1 className="text-3xl font-bold text-blue-600 mb-2">GEPT 英檢中級閃卡</h1>
                  <p className="text-slate-500">每天 5 個字，輕鬆掌握 5000 單</p>
                  <div className="mt-4 flex justify-center gap-2">
                    {Object.keys(wordData).map(day => (
                      <button key={day} onClick={() => { setCurrentDay(day); resetDay(); }}
                        className={`px-4 py-1 rounded-full text-sm font-medium transition-colors ${currentDay === day ? 'bg-blue-600 text-white' : 'bg-white text-slate-600 border border-slate-200 hover:bg-slate-100'}`}>
                        {day}
                      </button>
                    ))}
                  </div>
                </header>

                <div className="mb-6">
                  <div className="flex justify-between text-xs font-semibold text-slate-400 mb-1">
                    <span>進度: {currentIndex + 1} / {currentWords.length}</span>
                    <span>{Math.round(((currentIndex + (isCompleted ? 1 : 0)) / currentWords.length) * 100)}%</span>
                  </div>
                  <div className="h-2 w-full bg-slate-200 rounded-full overflow-hidden">
                    <div className="h-full bg-blue-500 transition-all duration-300" style={{ width: `${((currentIndex + (isCompleted ? 1 : 0)) / currentWords.length) * 100}%` }}></div>
                  </div>
                </div>

                <div className="relative h-96 perspective-1000 mb-8">
                  {!isCompleted ? (
                    <div onClick={() => setIsFlipped(!isFlipped)} className={`relative w-full h-full transition-transform duration-500 transform-style-3d cursor-pointer ${isFlipped ? 'rotate-y-180' : ''}`}>
                      <div className="absolute inset-0 w-full h-full bg-white rounded-3xl shadow-xl border border-slate-100 flex flex-col items-center justify-center p-8 backface-hidden">
                        <div className="text-sm font-bold text-blue-500 uppercase tracking-widest mb-4">Vocabulary</div>
                        <h2 className="text-5xl font-bold mb-2">{currentWord.word}</h2>
                        <div className="text-xl text-slate-400 font-mono mb-6">{currentWord.ipa}</div>
                        <button onClick={(e) => { e.stopPropagation(); handleSpeak(currentWord.word); }} className="p-3 bg-blue-50 rounded-full text-blue-600 hover:bg-blue-100"><Icon name="volume-2" /></button>
                      </div>
                      <div className="absolute inset-0 w-full h-full bg-blue-600 text-white rounded-3xl shadow-xl flex flex-col p-8 rotate-y-180 backface-hidden overflow-y-auto">
                        <div className="flex justify-between items-start mb-4">
                          <span className="bg-blue-500 px-3 py-1 rounded text-xs font-bold">{currentWord.pos}</span>
                          <button onClick={(e) => { e.stopPropagation(); handleSpeak(currentWord.word); }} className="p-1 hover:bg-blue-500 rounded"><Icon name="volume-2" size={20} /></button>
                        </div>
                        <h3 className="text-3xl font-bold mb-1">{currentWord.word}</h3>
                        <p className="text-2xl font-medium mb-4 text-blue-100">{currentWord.trans}</p>
                        <div className="border-t border-blue-500 pt-4 mb-4">
                          <p className="text-sm font-semibold text-blue-200 mb-1">發音要點：</p>
                          <p className="text-sm">{currentWord.detail}</p>
                        </div>
                        <div className="bg-blue-700/50 p-4 rounded-xl">
                          <div className="flex justify-between items-center mb-2">
                            <p className="text-xs font-bold text-blue-200 uppercase">Example</p>
                            <button onClick={(e) => { e.stopPropagation(); handleSpeak(currentWord.example); }} className="p-1 hover:bg-blue-600 rounded"><Icon name="volume-2" size={16} /></button>
                          </div>
                          <p className="text-sm leading-relaxed mb-2 font-medium">{currentWord.example}</p>
                          <p className="text-sm text-blue-100">{currentWord.exampleTrans}</p>
                        </div>
                      </div>
                    </div>
                  ) : (
                    <div className="w-full h-full bg-white rounded-3xl shadow-xl flex flex-col items-center justify-center p-8">
                      <div className="w-20 h-20 bg-green-100 text-green-600 rounded-full flex items-center justify-center mb-6"><Icon name="check-circle-2" size={48} /></div>
                      <h2 className="text-2xl font-bold mb-2">太棒了！</h2>
                      <div className="flex gap-4">
                        <button onClick={resetDay} className="flex items-center gap-2 px-6 py-3 bg-slate-100 text-slate-600 rounded-xl font-bold"><Icon name="rotate-ccw" size={20} /> 重來</button>
                        <button onClick={() => { setCurrentDay(currentDay === "Day 1" ? "Day 2" : "Day 1"); resetDay(); }} className="flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-xl font-bold shadow-lg">下一組 <Icon name="chevron-right" size={20} /></button>
                      </div>
                    </div>
                  )}
                </div>

                {!isCompleted && (
                  <div className="flex justify-between items-center gap-4">
                    <button onClick={prevCard} disabled={currentIndex === 0} className={`flex-1 flex items-center justify-center gap-2 py-4 rounded-2xl font-bold ${currentIndex === 0 ? 'bg-slate-100 text-slate-300' : 'bg-white text-slate-600 shadow-md'}`}>
                      <Icon name="chevron-left" /> 上一個
                    </button>
                    <button onClick={nextCard} className="flex-1 flex items-center justify-center gap-2 py-4 bg-blue-600 text-white rounded-2xl font-bold shadow-lg shadow-blue-200">
                      {currentIndex === currentWords.length - 1 ? '完成' : '下一個'} <Icon name="chevron-right" />
                    </button>
                  </div>
                )}
              </div>
            </div>
          );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>